# –õ–æ–≥–∏–∫–∞ –¥–µ—Ç–µ–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏—è –∫–æ–º–∏—Å—Å–∏–∏

## üìã –û–±–∑–æ—Ä

–ö–æ–≥–¥–∞ –±–æ—Ç –æ–±–Ω–∞—Ä—É–∂–∏–≤–∞–µ—Ç –∫–æ–º–∏—Å—Å–∏—é –≤ –ø–æ—Å–ª–µ–¥–Ω–∏—Ö —Å–¥–µ–ª–∫–∞—Ö, –æ–Ω –¥–æ–ª–∂–µ–Ω:
1. ‚úÖ –û—Å—Ç–∞–Ω–æ–≤–∏—Ç—å —Ç–æ—Ä–≥–æ–≤–ª—é –Ω–∞ —Ç–µ–∫—É—â–µ–º –∞–∫–∫–∞—É–Ω—Ç–µ
2. ‚úÖ –ü—Ä–æ–≤–µ—Ä–∏—Ç—å, –Ω–µ—Ç –ª–∏ –æ—Ç–∫—Ä—ã—Ç—ã—Ö –ø–æ–∑–∏—Ü–∏–π
3. ‚úÖ –ü–µ—Ä–µ–π—Ç–∏ –∫ —Å–ª–µ–¥—É—é—â–µ–º—É –∞–∫–∫–∞—É–Ω—Ç—É (–µ—Å–ª–∏ –º—É–ª—å—Ç–∏–∞–∫–∫–∞—É–Ω—Ç–∏–Ω–≥ –≤–∫–ª—é—á–µ–Ω)

---

## üîç –î–µ—Ç–∞–ª—å–Ω–∞—è –ª–æ–≥–∏–∫–∞ —Ä–∞–±–æ—Ç—ã

### 1. –î–µ—Ç–µ–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –∫–æ–º–∏—Å—Å–∏–∏

**–ì–¥–µ –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç:**
- –§—É–Ω–∫—Ü–∏—è `checkCommissionAfterClose(orderId)` –≤—ã–∑—ã–≤–∞–µ—Ç—Å—è –ø–æ—Å–ª–µ –∑–∞–∫—Ä—ã—Ç–∏—è –ø–æ–∑–∏—Ü–∏–∏
- –í—ã–∑—ã–≤–∞–µ—Ç—Å—è –∞—Å–∏–Ω—Ö—Ä–æ–Ω–Ω–æ, –Ω–µ –±–ª–æ–∫–∏—Ä—É–µ—Ç —Ç–æ—Ä–≥–æ–≤–ª—é

**–ö–∞–∫ —Ä–∞–±–æ—Ç–∞–µ—Ç:**
```typescript
// –ü–æ—Å–ª–µ –∑–∞–∫—Ä—ã—Ç–∏—è –ø–æ–∑–∏—Ü–∏–∏ (closePosition)
const commissionCheckPromise = orderId && apiKeyClient
  ? checkCommissionAfterClose(orderId).catch((error) => {
      console.error(`[COMMISSION] –û—à–∏–±–∫–∞ –ø—Ä–æ–≤–µ—Ä–∫–∏ –∫–æ–º–∏—Å—Å–∏–∏:`, error);
    })
  : Promise.resolve();
```

**–ü—Ä–æ–≤–µ—Ä–∫–∞ –∫–æ–º–∏—Å—Å–∏–∏:**
```typescript
// –ü–æ–ª—É—á–∞–µ–º –¥–µ—Ç–∞–ª–∏ –æ—Ä–¥–µ—Ä–∞ —á–µ—Ä–µ–∑ API Key
const orderDetails = await apiKeyClient.getOrderDetails(orderId, SYMBOL);

// –ò—â–µ–º –ø–æ–ª–µ –∫–æ–º–∏—Å—Å–∏–∏ –≤ –æ—Ç–≤–µ—Ç–µ
let commission = 0;
if (orderDetails && orderDetails.data) {
  const order = Array.isArray(orderDetails.data) ? orderDetails.data[0] : orderDetails.data;
  commission = parseFloat(String(order.fee || order.commission || order.feeAmount || 0));
}
```

**–ï—Å–ª–∏ –∫–æ–º–∏—Å—Å–∏—è > 0:**
- –õ–æ–≥–∏—Ä—É–µ—Ç—Å—è –ø—Ä–µ–¥—É–ø—Ä–µ–∂–¥–µ–Ω–∏–µ
- –ï—Å–ª–∏ –º—É–ª—å—Ç–∏–∞–∫–∫–∞—É–Ω—Ç–∏–Ω–≥ –≤–∫–ª—é—á–µ–Ω ‚Üí –ø–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏–µ –Ω–∞ —Å–ª–µ–¥—É—é—â–∏–π –∞–∫–∫–∞—É–Ω—Ç
- –ï—Å–ª–∏ –º—É–ª—å—Ç–∏–∞–∫–∫–∞—É–Ω—Ç–∏–Ω–≥ –≤—ã–∫–ª—é—á–µ–Ω ‚Üí –æ—Å—Ç–∞–Ω–æ–≤–∫–∞ –±–æ—Ç–∞

---

### 2. –û—Å—Ç–∞–Ω–æ–≤–∫–∞ —Ç–æ—Ä–≥–æ–≤–ª–∏ –Ω–∞ —Ç–µ–∫—É—â–µ–º –∞–∫–∫–∞—É–Ω—Ç–µ

**–ß—Ç–æ –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç:**
1. –í—ã–∑—ã–≤–∞–µ—Ç—Å—è `stopTradingOnCurrentAccount('–û–±–Ω–∞—Ä—É–∂–µ–Ω–∞ –∫–æ–º–∏—Å—Å–∏—è')`
2. –§—É–Ω–∫—Ü–∏—è:
   - –û–±–Ω–æ–≤–ª—è–µ—Ç –±–∞–ª–∞–Ω—Å –∞–∫–∫–∞—É–Ω—Ç–∞ (–µ—Å–ª–∏ –ø–æ–∑–∏—Ü–∏—è –∑–∞–∫—Ä—ã—Ç–∞)
   - –£—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ—Ç —Å—Ç–∞—Ç—É—Å –∞–∫–∫–∞—É–Ω—Ç–∞: `'stopped'`
   - –£—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ—Ç –ø—Ä–∏—á–∏–Ω—É –æ—Å—Ç–∞–Ω–æ–≤–∫–∏: `'–û–±–Ω–∞—Ä—É–∂–µ–Ω–∞ –∫–æ–º–∏—Å—Å–∏—è'`
   - –û—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ—Ç –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–∏ WebSocket (–Ω–æ –Ω–µ –æ—Ç–∫–ª—é—á–∞–µ—Ç —Å–æ–µ–¥–∏–Ω–µ–Ω–∏—è)
   - –û—á–∏—â–∞–µ—Ç `currentPosition`
   - –£—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ—Ç `isRunning = false`

**–ö–æ–¥:**
```typescript
// –í checkCommissionAfterClose
if (multiAccountConfig.enabled && currentAccount) {
  // –ö–†–ò–¢–ò–ß–ï–°–ö–ò –í–ê–ñ–ù–û: –û—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º —Ç–æ—Ä–≥–æ–≤–ª—é –Ω–∞ —Ç–µ–∫—É—â–µ–º –∞–∫–∫–∞—É–Ω—Ç–µ –ø–µ—Ä–µ–¥ –ø–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏–µ–º
  try {
    await stopTradingOnCurrentAccount('–û–±–Ω–∞—Ä—É–∂–µ–Ω–∞ –∫–æ–º–∏—Å—Å–∏—è');
  } catch (stopError) {
    console.error('[MULTI-ACCOUNT] –û—à–∏–±–∫–∞ –æ—Å—Ç–∞–Ω–æ–≤–∫–∏ —Ç–µ–∫—É—â–µ–≥–æ –∞–∫–∫–∞—É–Ω—Ç–∞ –ø—Ä–∏ –æ–±–Ω–∞—Ä—É–∂–µ–Ω–∏–∏ –∫–æ–º–∏—Å—Å–∏–∏:', stopError);
  }
  
  // –¢–µ–ø–µ—Ä—å –ø–µ—Ä–µ–∫–ª—é—á–∞–µ–º—Å—è –Ω–∞ —Å–ª–µ–¥—É—é—â–∏–π –∞–∫–∫–∞—É–Ω—Ç
  switchToNextAccount('–û–±–Ω–∞—Ä—É–∂–µ–Ω–∞ –∫–æ–º–∏—Å—Å–∏—è').catch(error => {
    // –û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫...
  });
}
```

---

### 3. –ü—Ä–æ–≤–µ—Ä–∫–∞ –æ—Ç–∫—Ä—ã—Ç—ã—Ö –ø–æ–∑–∏—Ü–∏–π

**–ì–¥–µ –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç:**
- –í —Ñ—É–Ω–∫—Ü–∏–∏ `switchToAccount()` –ø–µ—Ä–µ–¥ –ø–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏–µ–º –Ω–∞ –Ω–æ–≤—ã–π –∞–∫–∫–∞—É–Ω—Ç
- –ü—Ä–æ–≤–µ—Ä—è–µ—Ç—Å—è —á–µ—Ä–µ–∑ API: `tradingHandler.getOpenPositions(SYMBOL)`

**–ö–∞–∫ —Ä–∞–±–æ—Ç–∞–µ—Ç:**
```typescript
// –í switchToAccount
if (currentAccount && tradingHandler.getClient()) {
  const positionsResult = await tradingHandler.getOpenPositions(SYMBOL);
  
  // –ü–∞—Ä—Å–∏–º —Ä–µ–∑—É–ª—å—Ç–∞—Ç
  let positions: any[] = [];
  // ... –ø–∞—Ä—Å–∏–Ω–≥ ...
  
  const position = positions.find((p: any) => p.symbol === SYMBOL);
  if (position && parseFloat(String(position.holdVol || 0)) > 0) {
    console.log(`[MULTI-ACCOUNT] ‚ö†Ô∏è –û–±–Ω–∞—Ä—É–∂–µ–Ω–∞ –æ—Ç–∫—Ä—ã—Ç–∞—è –ø–æ–∑–∏—Ü–∏—è, –∑–∞–∫—Ä—ã–≤–∞–µ–º –ø–µ—Ä–µ–¥ –ø–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏–µ–º`);
    
    // –ó–∞–∫—Ä—ã–≤–∞–µ–º –ø–æ–∑–∏—Ü–∏—é
    if (currentSpread) {
      await closePosition(currentSpread);
      await new Promise(resolve => setTimeout(resolve, 1500));
      
      // –ü—Ä–æ–≤–µ—Ä—è–µ–º, –∑–∞–∫—Ä—ã–ª–∞—Å—å –ª–∏ –ø–æ–∑–∏—Ü–∏—è
      const checkResult = await tradingHandler.getOpenPositions(SYMBOL);
      // ... –ø—Ä–æ–≤–µ—Ä–∫–∞ ...
    }
  }
}
```

**–í–∞–∂–Ω–æ:**
- –ü—Ä–æ–≤–µ—Ä–∫–∞ –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç **–ø–µ—Ä–µ–¥** –ø–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏–µ–º –Ω–∞ –Ω–æ–≤—ã–π –∞–∫–∫–∞—É–Ω—Ç
- –ï—Å–ª–∏ –ø–æ–∑–∏—Ü–∏—è –Ω–∞–π–¥–µ–Ω–∞, –æ–Ω–∞ –∑–∞–∫—Ä—ã–≤–∞–µ—Ç—Å—è (–¥–æ 3 –ø–æ–ø—ã—Ç–æ–∫)
- –ï—Å–ª–∏ –ø–æ–∑–∏—Ü–∏—è –Ω–µ –∑–∞–∫—Ä—ã–≤–∞–µ—Ç—Å—è, –ª–æ–≥–∏—Ä—É–µ—Ç—Å—è –ø—Ä–µ–¥—É–ø—Ä–µ–∂–¥–µ–Ω–∏–µ, –Ω–æ –ø–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏–µ –ø—Ä–æ–¥–æ–ª–∂–∞–µ—Ç—Å—è

---

### 4. –ü–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏–µ –Ω–∞ —Å–ª–µ–¥—É—é—â–∏–π –∞–∫–∫–∞—É–Ω—Ç

**–ß—Ç–æ –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç:**
1. –í—ã–∑—ã–≤–∞–µ—Ç—Å—è `switchToNextAccount('–û–±–Ω–∞—Ä—É–∂–µ–Ω–∞ –∫–æ–º–∏—Å—Å–∏—è')`
2. –§—É–Ω–∫—Ü–∏—è:
   - –ü—Ä–æ–≤–µ—Ä—è–µ—Ç `currentPosition` (–¥–æ–ª–∂–µ–Ω –±—ã—Ç—å `null`, —Ç–∞–∫ –∫–∞–∫ –ø–æ–∑–∏—Ü–∏—è —É–∂–µ –∑–∞–∫—Ä—ã—Ç–∞)
   - –ü—Ä–æ–≤–µ—Ä—è–µ—Ç, –µ—Å—Ç—å –ª–∏ –µ—â–µ –¥–æ—Å—Ç—É–ø–Ω—ã–µ –∞–∫–∫–∞—É–Ω—Ç—ã
   - –í—ã–∑—ã–≤–∞–µ—Ç `switchToAccount()` –¥–ª—è —Å–ª–µ–¥—É—é—â–µ–≥–æ –∞–∫–∫–∞—É–Ω—Ç–∞
   - `switchToAccount()` –ø—Ä–æ–≤–µ—Ä—è–µ—Ç –æ—Ç–∫—Ä—ã—Ç—ã–µ –ø–æ–∑–∏—Ü–∏–∏ (—Å–º. –≤—ã—à–µ)
   - `switchToAccount()` –≤—ã–∑—ã–≤–∞–µ—Ç `stopTradingOnCurrentAccount()` –¥–ª—è —Ç–µ–∫—É—â–µ–≥–æ –∞–∫–∫–∞—É–Ω—Ç–∞
   - –ü–µ—Ä–µ–∫–ª—é—á–∞–µ—Ç—Å—è –Ω–∞ –Ω–æ–≤—ã–π –∞–∫–∫–∞—É–Ω—Ç –∏ –ø—Ä–æ–¥–æ–ª–∂–∞–µ—Ç —Ç–æ—Ä–≥–æ–≤–ª—é

**–ö–æ–¥:**
```typescript
// –í switchToNextAccount
// –ö–†–ò–¢–ò–ß–ï–°–ö–ò –í–ê–ñ–ù–û: –ù–µ –ø–µ—Ä–µ–∫–ª—é—á–∞–µ–º—Å—è, –µ—Å–ª–∏ –ø–æ–∑–∏—Ü–∏—è –æ—Ç–∫—Ä—ã—Ç–∞
if (currentPosition) {
  console.log(`[MULTI-ACCOUNT] ‚ö†Ô∏è –ù–µ–≤–æ–∑–º–æ–∂–Ω–æ –ø–µ—Ä–µ–∫–ª—é—á–∏—Ç—å—Å—è: –ø–æ–∑–∏—Ü–∏—è –æ—Ç–∫—Ä—ã—Ç–∞. –î–æ–∂–¥–µ–º—Å—è –∑–∞–∫—Ä—ã—Ç–∏—è –ø–æ–∑–∏—Ü–∏–∏.`);
  return false;
}

// –ù–∞—Ö–æ–¥–∏–º —Å–ª–µ–¥—É—é—â–∏–π –¥–æ—Å—Ç—É–ø–Ω—ã–π –∞–∫–∫–∞—É–Ω—Ç
// ...

// –ü–µ—Ä–µ–∫–ª—é—á–∞–µ–º—Å—è –Ω–∞ —Å–ª–µ–¥—É—é—â–∏–π –∞–∫–∫–∞—É–Ω—Ç
await switchToAccount(nextAccount.id, reason);
```

---

## ‚úÖ –ò—Ç–æ–≥–æ–≤–∞—è –ø–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω–æ—Å—Ç—å –¥–µ–π—Å—Ç–≤–∏–π

### –ü—Ä–∏ –æ–±–Ω–∞—Ä—É–∂–µ–Ω–∏–∏ –∫–æ–º–∏—Å—Å–∏–∏:

1. **–î–µ—Ç–µ–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –∫–æ–º–∏—Å—Å–∏–∏** (`checkCommissionAfterClose`)
   - –ü—Ä–æ–≤–µ—Ä—è–µ—Ç—Å—è –∫–æ–º–∏—Å—Å–∏—è –≤ –ø–æ—Å–ª–µ–¥–Ω–µ–π —Å–¥–µ–ª–∫–µ
   - –ï—Å–ª–∏ –∫–æ–º–∏—Å—Å–∏—è > 0 ‚Üí –ø–µ—Ä–µ—Ö–æ–¥ –∫ —Å–ª–µ–¥—É—é—â–µ–º—É —à–∞–≥—É

2. **–û—Å—Ç–∞–Ω–æ–≤–∫–∞ —Ç–æ—Ä–≥–æ–≤–ª–∏ –Ω–∞ —Ç–µ–∫—É—â–µ–º –∞–∫–∫–∞—É–Ω—Ç–µ** (`stopTradingOnCurrentAccount`)
   - –û–±–Ω–æ–≤–ª—è–µ—Ç—Å—è –±–∞–ª–∞–Ω—Å –∞–∫–∫–∞—É–Ω—Ç–∞
   - –£—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ—Ç—Å—è —Å—Ç–∞—Ç—É—Å: `'stopped'`
   - –£—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ—Ç—Å—è –ø—Ä–∏—á–∏–Ω–∞: `'–û–±–Ω–∞—Ä—É–∂–µ–Ω–∞ –∫–æ–º–∏—Å—Å–∏—è'`
   - –û—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞—é—Ç—Å—è –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–∏ WebSocket
   - –û—á–∏—â–∞–µ—Ç—Å—è `currentPosition`
   - –£—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ—Ç—Å—è `isRunning = false`

3. **–ü–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏–µ –Ω–∞ —Å–ª–µ–¥—É—é—â–∏–π –∞–∫–∫–∞—É–Ω—Ç** (`switchToNextAccount`)
   - –ü—Ä–æ–≤–µ—Ä—è–µ—Ç—Å—è `currentPosition` (–¥–æ–ª–∂–µ–Ω –±—ã—Ç—å `null`)
   - –ù–∞—Ö–æ–¥–∏—Ç—Å—è —Å–ª–µ–¥—É—é—â–∏–π –¥–æ—Å—Ç—É–ø–Ω—ã–π –∞–∫–∫–∞—É–Ω—Ç
   - –í—ã–∑—ã–≤–∞–µ—Ç—Å—è `switchToAccount()`

4. **–ü—Ä–æ–≤–µ—Ä–∫–∞ –æ—Ç–∫—Ä—ã—Ç—ã—Ö –ø–æ–∑–∏—Ü–∏–π** (–≤ `switchToAccount`)
   - –ü—Ä–æ–≤–µ—Ä—è—é—Ç—Å—è –æ—Ç–∫—Ä—ã—Ç—ã–µ –ø–æ–∑–∏—Ü–∏–∏ —á–µ—Ä–µ–∑ API
   - –ï—Å–ª–∏ –ø–æ–∑–∏—Ü–∏—è –Ω–∞–π–¥–µ–Ω–∞ ‚Üí –∑–∞–∫—Ä—ã–≤–∞–µ—Ç—Å—è (–¥–æ 3 –ø–æ–ø—ã—Ç–æ–∫)
   - –ï—Å–ª–∏ –ø–æ–∑–∏—Ü–∏—è –Ω–µ –∑–∞–∫—Ä—ã–≤–∞–µ—Ç—Å—è ‚Üí –ª–æ–≥–∏—Ä—É–µ—Ç—Å—è –ø—Ä–µ–¥—É–ø—Ä–µ–∂–¥–µ–Ω–∏–µ

5. **–ü–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏–µ –Ω–∞ –Ω–æ–≤—ã–π –∞–∫–∫–∞—É–Ω—Ç** (–≤ `switchToAccount`)
   - –û—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ—Ç—Å—è —Ç–æ—Ä–≥–æ–≤–ª—è –Ω–∞ —Ç–µ–∫—É—â–µ–º –∞–∫–∫–∞—É–Ω—Ç–µ (–µ—Å–ª–∏ –µ—â–µ –Ω–µ –æ—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∞)
   - –ü–µ—Ä–µ–∫–ª—é—á–∞—é—Ç—Å—è —Ç–æ—Ä–≥–æ–≤—ã–µ –∫–ª–∏–µ–Ω—Ç—ã (WEB Token, API Key, API Secret)
   - –í–æ—Å—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞—é—Ç—Å—è –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–∏ WebSocket
   - –ü—Ä–æ–¥–æ–ª–∂–∞–µ—Ç—Å—è —Ç–æ—Ä–≥–æ–≤–ª—è –Ω–∞ –Ω–æ–≤–æ–º –∞–∫–∫–∞—É–Ω—Ç–µ

---

## üîí –ì–∞—Ä–∞–Ω—Ç–∏–∏ –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏

### ‚úÖ –ü–æ–∑–∏—Ü–∏–∏ –≤—Å–µ–≥–¥–∞ –∑–∞–∫—Ä—ã–≤–∞—é—Ç—Å—è –ø–µ—Ä–µ–¥ –ø–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏–µ–º

1. **–ü—Ä–æ–≤–µ—Ä–∫–∞ –≤ `switchToAccount()`:**
   - –ü—Ä–æ–≤–µ—Ä—è—é—Ç—Å—è –æ—Ç–∫—Ä—ã—Ç—ã–µ –ø–æ–∑–∏—Ü–∏–∏ —á–µ—Ä–µ–∑ API –ø–µ—Ä–µ–¥ –ø–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏–µ–º
   - –ï—Å–ª–∏ –ø–æ–∑–∏—Ü–∏—è –Ω–∞–π–¥–µ–Ω–∞, –æ–Ω–∞ –∑–∞–∫—Ä—ã–≤–∞–µ—Ç—Å—è (–¥–æ 3 –ø–æ–ø—ã—Ç–æ–∫)

2. **–ü—Ä–æ–≤–µ—Ä–∫–∞ –≤ `switchToNextAccount()`:**
   - –ü—Ä–æ–≤–µ—Ä—è–µ—Ç—Å—è `currentPosition` –ø–µ—Ä–µ–¥ –ø–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏–µ–º
   - –ï—Å–ª–∏ –ø–æ–∑–∏—Ü–∏—è –æ—Ç–∫—Ä—ã—Ç–∞, –ø–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏–µ –±–ª–æ–∫–∏—Ä—É–µ—Ç—Å—è

3. **–ü—Ä–æ–≤–µ—Ä–∫–∞ –≤ `stopTradingOnCurrentAccount()`:**
   - –ï—Å–ª–∏ –ø–æ–∑–∏—Ü–∏—è –æ—Ç–∫—Ä—ã—Ç–∞, –±–∞–ª–∞–Ω—Å –Ω–µ –æ–±–Ω–æ–≤–ª—è–µ—Ç—Å—è (–∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –∫—ç—à)
   - –õ–æ–≥–∏—Ä—É–µ—Ç—Å—è –ø—Ä–µ–¥—É–ø—Ä–µ–∂–¥–µ–Ω–∏–µ

### ‚úÖ –°—Ç–∞—Ç—É—Å –∞–∫–∫–∞—É–Ω—Ç–∞ –≤—Å–µ–≥–¥–∞ –æ–±–Ω–æ–≤–ª—è–µ—Ç—Å—è

- –ü—Ä–∏ –æ–±–Ω–∞—Ä—É–∂–µ–Ω–∏–∏ –∫–æ–º–∏—Å—Å–∏–∏ —Å—Ç–∞—Ç—É—Å –∞–∫–∫–∞—É–Ω—Ç–∞ —É—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ—Ç—Å—è –≤ `'stopped'`
- –ü—Ä–∏—á–∏–Ω–∞ –æ—Å—Ç–∞–Ω–æ–≤–∫–∏: `'–û–±–Ω–∞—Ä—É–∂–µ–Ω–∞ –∫–æ–º–∏—Å—Å–∏—è'`
- –§–∏–Ω–∞–ª—å–Ω—ã–π –±–∞–ª–∞–Ω—Å –æ–±–Ω–æ–≤–ª—è–µ—Ç—Å—è (–µ—Å–ª–∏ –ø–æ–∑–∏—Ü–∏—è –∑–∞–∫—Ä—ã—Ç–∞)

### ‚úÖ –¢–æ—Ä–≥–æ–≤–ª—è –ø—Ä–æ–¥–æ–ª–∂–∞–µ—Ç—Å—è –Ω–∞ —Å–ª–µ–¥—É—é—â–µ–º –∞–∫–∫–∞—É–Ω—Ç–µ

- –ü–æ—Å–ª–µ –ø–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏—è —Ç–æ—Ä–≥–æ–≤–ª—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø—Ä–æ–¥–æ–ª–∂–∞–µ—Ç—Å—è –Ω–∞ –Ω–æ–≤–æ–º –∞–∫–∫–∞—É–Ω—Ç–µ
- WebSocket —Å–æ–µ–¥–∏–Ω–µ–Ω–∏—è –æ—Å—Ç–∞—é—Ç—Å—è –∞–∫—Ç–∏–≤–Ω—ã–º–∏ (–æ–Ω–∏ –æ–±—â–∏–µ –¥–ª—è –≤—Å–µ—Ö –∞–∫–∫–∞—É–Ω—Ç–æ–≤)
- –û–±—Ä–∞–±–æ—Ç—á–∏–∫–∏ —Å–æ–±—ã—Ç–∏–π –≤–æ—Å—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞—é—Ç—Å—è –¥–ª—è –Ω–æ–≤–æ–≥–æ –∞–∫–∫–∞—É–Ω—Ç–∞

---

## üß™ –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

### –ö–∞–∫ –ø—Ä–æ–≤–µ—Ä–∏—Ç—å —Ä–∞–±–æ—Ç—É:

1. **–í–∫–ª—é—á–∏—Ç–µ –º—É–ª—å—Ç–∏–∞–∫–∫–∞—É–Ω—Ç–∏–Ω–≥** —Å –Ω–µ—Å–∫–æ–ª—å–∫–∏–º–∏ –∞–∫–∫–∞—É–Ω—Ç–∞–º–∏
2. **–ó–∞–ø—É—Å—Ç–∏—Ç–µ —Ç–æ—Ä–≥–æ–≤–ª—é** –Ω–∞ –ø–µ—Ä–≤–æ–º –∞–∫–∫–∞—É–Ω—Ç–µ
3. **–î–æ–∂–¥–∏—Ç–µ—Å—å –∑–∞–∫—Ä—ã—Ç–∏—è —Å–¥–µ–ª–∫–∏** —Å –∫–æ–º–∏—Å—Å–∏–µ–π
4. **–ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ª–æ–≥–∏:**
   - `[COMMISSION] ‚ö†Ô∏è –û–ë–ù–ê–†–£–ñ–ï–ù–ê –ö–û–ú–ò–°–°–ò–Ø`
   - `[MULTI-ACCOUNT] üîÑ –û–±–Ω–∞—Ä—É–∂–µ–Ω–∞ –∫–æ–º–∏—Å—Å–∏—è, –æ—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º —Ç–æ—Ä–≥–æ–≤–ª—é –Ω–∞ —Ç–µ–∫—É—â–µ–º –∞–∫–∫–∞—É–Ω—Ç–µ –∏ –ø–µ—Ä–µ–∫–ª—é—á–∞–µ–º—Å—è –Ω–∞ —Å–ª–µ–¥—É—é—â–∏–π`
   - `[MULTI-ACCOUNT] ‚ö†Ô∏è –û–±–Ω–∞—Ä—É–∂–µ–Ω–∞ –æ—Ç–∫—Ä—ã—Ç–∞—è –ø–æ–∑–∏—Ü–∏—è, –∑–∞–∫—Ä—ã–≤–∞–µ–º –ø–µ—Ä–µ–¥ –ø–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏–µ–º` (–µ—Å–ª–∏ –ø–æ–∑–∏—Ü–∏—è –±—ã–ª–∞ –æ—Ç–∫—Ä—ã—Ç–∞)
   - `[MULTI-ACCOUNT] ‚úÖ –ü–æ–∑–∏—Ü–∏—è —É—Å–ø–µ—à–Ω–æ –∑–∞–∫—Ä—ã—Ç–∞ –ø–µ—Ä–µ–¥ –ø–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏–µ–º` (–µ—Å–ª–∏ –ø–æ–∑–∏—Ü–∏—è –±—ã–ª–∞ –∑–∞–∫—Ä—ã—Ç–∞)
   - `[MULTI-ACCOUNT] ‚úÖ –û–±—Ä–∞–±–æ—Ç—á–∏–∫–∏ –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω—ã, —Ç–æ—Ä–≥–æ–≤–ª—è –ø—Ä–æ–¥–æ–ª–∂–∞–µ—Ç—Å—è –Ω–∞ –∞–∫–∫–∞—É–Ω—Ç–µ`

5. **–ü—Ä–æ–≤–µ—Ä—å—Ç–µ —Å—Ç–∞—Ç—É—Å –∞–∫–∫–∞—É–Ω—Ç–∞:**
   - –ü–µ—Ä–≤—ã–π –∞–∫–∫–∞—É–Ω—Ç –¥–æ–ª–∂–µ–Ω –±—ã—Ç—å –≤ —Å—Ç–∞—Ç—É—Å–µ `'stopped'`
   - –ü—Ä–∏—á–∏–Ω–∞ –æ—Å—Ç–∞–Ω–æ–≤–∫–∏: `'–û–±–Ω–∞—Ä—É–∂–µ–Ω–∞ –∫–æ–º–∏—Å—Å–∏—è'`
   - –í—Ç–æ—Ä–æ–π –∞–∫–∫–∞—É–Ω—Ç –¥–æ–ª–∂–µ–Ω –±—ã—Ç—å –≤ —Å—Ç–∞—Ç—É—Å–µ `'trading'`

---

## üìù –†–µ–∑—é–º–µ

**–õ–æ–≥–∏–∫–∞ –¥–µ—Ç–µ–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏—è –∫–æ–º–∏—Å—Å–∏–∏ —Ä–∞–±–æ—Ç–∞–µ—Ç –ø—Ä–∞–≤–∏–ª—å–Ω–æ:**

‚úÖ –ö–æ–º–∏—Å—Å–∏—è –¥–µ—Ç–µ–∫—Ç–∏—Ä—É–µ—Ç—Å—è –≤ –ø–æ—Å–ª–µ–¥–Ω–∏—Ö —Å–¥–µ–ª–∫–∞—Ö  
‚úÖ –¢–æ—Ä–≥–æ–≤–ª—è –æ—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ—Ç—Å—è –Ω–∞ —Ç–µ–∫—É—â–µ–º –∞–∫–∫–∞—É–Ω—Ç–µ  
‚úÖ –ü—Ä–æ–≤–µ—Ä—è—é—Ç—Å—è –æ—Ç–∫—Ä—ã—Ç—ã–µ –ø–æ–∑–∏—Ü–∏–∏ –ø–µ—Ä–µ–¥ –ø–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏–µ–º  
‚úÖ –ü–æ–∑–∏—Ü–∏–∏ –∑–∞–∫—Ä—ã–≤–∞—é—Ç—Å—è –ø–µ—Ä–µ–¥ –ø–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏–µ–º (–¥–æ 3 –ø–æ–ø—ã—Ç–æ–∫)  
‚úÖ –ë–æ—Ç –ø–µ—Ä–µ–∫–ª—é—á–∞–µ—Ç—Å—è –Ω–∞ —Å–ª–µ–¥—É—é—â–∏–π –∞–∫–∫–∞—É–Ω—Ç  
‚úÖ –¢–æ—Ä–≥–æ–≤–ª—è –ø—Ä–æ–¥–æ–ª–∂–∞–µ—Ç—Å—è –Ω–∞ —Å–ª–µ–¥—É—é—â–µ–º –∞–∫–∫–∞—É–Ω—Ç–µ  

**–í—Å–µ –≥–∞—Ä–∞–Ω—Ç–∏–∏ –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏ —Å–æ–±–ª—é–¥–µ–Ω—ã!**

---

**–î–∞—Ç–∞ —Å–æ–∑–¥–∞–Ω–∏—è:** 2025-12-28  
**–í–µ—Ä—Å–∏—è:** 1.0













