# –ü—Ä–µ–¥–ª–æ–∂–µ–Ω–∏—è –ø–æ –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏ —Å–∫–æ—Ä–æ—Å—Ç–∏ –¥–µ—Ç–µ–∫—Ç–∞ —Å–∏–≥–Ω–∞–ª–∞, –≤—Ö–æ–¥–∞ –∏ –≤—ã—Ö–æ–¥–∞

## –ê–Ω–∞–ª–∏–∑ —Ç–µ–∫—É—â–∏—Ö —É–∑–∫–∏—Ö –º–µ—Å—Ç

### 1. –î–ï–¢–ï–ö–¢ –°–ò–ì–ù–ê–õ–ê (processSpread)

**–¢–µ–∫—É—â–∞—è —Å–∏—Ç—É–∞—Ü–∏—è:**
- `checkSpread()` –≤—ã–∑—ã–≤–∞–µ—Ç—Å—è –ø—Ä–∏ –∫–∞–∂–¥–æ–º –æ–±–Ω–æ–≤–ª–µ–Ω–∏–∏ —Ü–µ–Ω—ã (Binance –∏–ª–∏ MEXC)
- –ï—Å–ª–∏ –æ–±–µ —Ü–µ–Ω—ã –æ–±–Ω–æ–≤–ª—è—é—Ç—Å—è –æ–¥–Ω–æ–≤—Ä–µ–º–µ–Ω–Ω–æ, `checkSpread()` –≤—ã–∑—ã–≤–∞–µ—Ç—Å—è 2 —Ä–∞–∑–∞
- `processSpread()` –≤—ã–∑—ã–≤–∞–µ—Ç—Å—è –ø—Ä–∏ –∫–∞–∂–¥–æ–º –æ–±–Ω–æ–≤–ª–µ–Ω–∏–∏ —Å–ø—Ä–µ–¥–∞
- `analyzeExecution()` –≤—ã–∑—ã–≤–∞–µ—Ç—Å—è –∫–∞–∂–¥—ã–π —Ä–∞–∑, –¥–∞–∂–µ –µ—Å–ª–∏ —Å—Ç–∞–∫–∞–Ω –Ω–µ –∏–∑–º–µ–Ω–∏–ª—Å—è

**–£–∑–∫–∏–µ –º–µ—Å—Ç–∞:**
1. –î–≤–æ–π–Ω–æ–π –≤—ã–∑–æ–≤ `checkSpread()` –ø—Ä–∏ –æ–¥–Ω–æ–≤—Ä–µ–º–µ–Ω–Ω–æ–º –æ–±–Ω–æ–≤–ª–µ–Ω–∏–∏ —Ü–µ–Ω
2. `Date.now()` –≤—ã–∑—ã–≤–∞–µ—Ç—Å—è –º–Ω–æ–≥–æ–∫—Ä–∞—Ç–Ω–æ (–º–æ–∂–Ω–æ –∫—ç—à–∏—Ä–æ–≤–∞—Ç—å)
3. `analyzeExecution()` –ø–µ—Ä–µ—Å—á–∏—Ç—ã–≤–∞–µ—Ç—Å—è –¥–∞–∂–µ –µ—Å–ª–∏ —Å—Ç–∞–∫–∞–Ω –Ω–µ –∏–∑–º–µ–Ω–∏–ª—Å—è
4. –ü—Ä–æ–≤–µ—Ä–∫–∞ –≤–æ–∑—Ä–∞—Å—Ç–∞ —Å–∏–≥–Ω–∞–ª–∞ (`Date.now() - timestamp`) –ø—Ä–∏ –∫–∞–∂–¥–æ–º –≤—ã–∑–æ–≤–µ

---

### 2. –í–•–û–î –í –°–î–ï–õ–ö–£ (onSignal ‚Üí openPosition)

**–¢–µ–∫—É—â–∞—è —Å–∏—Ç—É–∞—Ü–∏—è:**
- `calculateAutoVolume()` –≤—ã–∑—ã–≤–∞–µ—Ç—Å—è –ø—Ä–∏ –∫–∞–∂–¥–æ–º —Å–∏–≥–Ω–∞–ª–µ (–∏—Å–ø–æ–ª—å–∑—É–µ—Ç –∫—ç—à)
- –ü—Ä–æ–≤–µ—Ä–∫–∞ –±–∞–ª–∞–Ω—Å–∞ –≤ `openPosition()` (–∏—Å–ø–æ–ª—å–∑—É–µ—Ç –∫—ç—à)
- `MIN_ORDER_INTERVAL = 200ms` (–º–æ–∂–µ—Ç –±—ã—Ç—å —É–º–µ–Ω—å—à–µ–Ω)
- –ü–æ–ª—É—á–µ–Ω–∏–µ –∫–æ–Ω—Ç—Ä–∞–∫—Ç–∞ (–∫—ç—à–∏—Ä—É–µ—Ç—Å—è)

**–£–∑–∫–∏–µ –º–µ—Å—Ç–∞:**
1. `calculateAutoVolume()` –≤—Å–µ –µ—â–µ –¥–µ–ª–∞–µ—Ç –ø—Ä–æ–≤–µ—Ä–∫–∏ –∫—ç—à–∞ –ø—Ä–∏ –∫–∞–∂–¥–æ–º —Å–∏–≥–Ω–∞–ª–µ
2. `MIN_ORDER_INTERVAL = 200ms` –º–æ–∂–µ—Ç –±—ã—Ç—å —É–º–µ–Ω—å—à–µ–Ω –¥–æ 100-150ms
3. –ü—Ä–æ–≤–µ—Ä–∫–∞ –±–∞–ª–∞–Ω—Å–∞ –¥—É–±–ª–∏—Ä—É–µ—Ç—Å—è (–≤ calculateAutoVolume –∏ openPosition)

---

### 3. –í–´–•–û–î –ò–ó –°–î–ï–õ–ö–ò (shouldClosePosition ‚Üí closePosition)

**–¢–µ–∫—É—â–∞—è —Å–∏—Ç—É–∞—Ü–∏—è:**
- `shouldClosePosition()` –≤—ã–∑—ã–≤–∞–µ—Ç—Å—è –ø—Ä–∏ –∫–∞–∂–¥–æ–º –æ–±–Ω–æ–≤–ª–µ–Ω–∏–∏ —Å–ø—Ä–µ–¥–∞
- –ú–Ω–æ–≥–æ –≤—ã—á–∏—Å–ª–µ–Ω–∏–π (mexcSpread, mexcSpreadTicks) –ø—Ä–∏ –∫–∞–∂–¥–æ–º –≤—ã–∑–æ–≤–µ
- `getOpenPositions()` - HTTP –∑–∞–ø—Ä–æ—Å (–Ω–µ–ª—å–∑—è –∏–∑–±–µ–∂–∞—Ç—å)
- `MIN_ORDER_INTERVAL = 200ms`

**–£–∑–∫–∏–µ –º–µ—Å—Ç–∞:**
1. –í—ã—á–∏—Å–ª–µ–Ω–∏—è `mexcSpread` –∏ `mexcSpreadTicks` –ø–æ–≤—Ç–æ—Ä—è—é—Ç—Å—è –ø—Ä–∏ –∫–∞–∂–¥–æ–º –≤—ã–∑–æ–≤–µ
2. `Date.now()` –≤—ã–∑—ã–≤–∞–µ—Ç—Å—è –≤ `shouldClosePosition()` (–º–æ–∂–Ω–æ –∫—ç—à–∏—Ä–æ–≤–∞—Ç—å)
3. `MIN_ORDER_INTERVAL = 200ms` –º–æ–∂–µ—Ç –±—ã—Ç—å —É–º–µ–Ω—å—à–µ–Ω

---

## –ü–†–ï–î–õ–û–ñ–ï–ù–ò–Ø –ü–û –û–ü–¢–ò–ú–ò–ó–ê–¶–ò–ò

### ‚úÖ –í–ê–†–ò–ê–ù–¢ 1: –û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è checkSpread() - –ø—Ä–µ–¥–æ—Ç–≤—Ä–∞—Ç–∏—Ç—å –¥–≤–æ–π–Ω–æ–π –≤—ã–∑–æ–≤

**–ü—Ä–æ–±–ª–µ–º–∞:** `checkSpread()` –≤—ã–∑—ã–≤–∞–µ—Ç—Å—è –ø—Ä–∏ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–∏ Binance –ò –ø—Ä–∏ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–∏ MEXC, —á—Ç–æ –º–æ–∂–µ—Ç –ø—Ä–∏–≤–µ—Å—Ç–∏ –∫ –¥–≤–æ–π–Ω–æ–º—É –≤—ã–∑–æ–≤—É.

**–†–µ—à–µ–Ω–∏–µ:** –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å debounce –∏–ª–∏ —Ñ–ª–∞–≥ –¥–ª—è –ø—Ä–µ–¥–æ—Ç–≤—Ä–∞—â–µ–Ω–∏—è –¥–≤–æ–π–Ω–æ–≥–æ –≤—ã–∑–æ–≤–∞.

```typescript
// –í price-monitor.ts
private checkSpreadPending: boolean = false;

private checkSpread(): void {
  // –ï—Å–ª–∏ —É–∂–µ –µ—Å—Ç—å –æ—Ç–ª–æ–∂–µ–Ω–Ω—ã–π –≤—ã–∑–æ–≤ - –ø—Ä–æ–ø—É—Å–∫–∞–µ–º
  if (this.checkSpreadPending) {
    return;
  }
  
  if (!this.binancePrice || !this.mexcPrice) {
    return;
  }
  
  // –£—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º —Ñ–ª–∞–≥
  this.checkSpreadPending = true;
  
  // –ò—Å–ø–æ–ª—å–∑—É–µ–º setImmediate –¥–ª—è –æ—Ç–ª–æ–∂–µ–Ω–Ω–æ–≥–æ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è (–ø–æ—Å–ª–µ –≤—Å–µ—Ö —Å–∏–Ω—Ö—Ä–æ–Ω–Ω—ã—Ö –æ–±–Ω–æ–≤–ª–µ–Ω–∏–π)
  setImmediate(() => {
    this.checkSpreadPending = false;
    // ... –æ—Å—Ç–∞–ª—å–Ω–æ–π –∫–æ–¥ checkSpread
  });
}
```

**–≠–∫–æ–Ω–æ–º–∏—è:** ~0.1-0.5ms –Ω–∞ –∫–∞–∂–¥–æ–º –¥–≤–æ–π–Ω–æ–º –≤—ã–∑–æ–≤–µ

---

### ‚úÖ –í–ê–†–ò–ê–ù–¢ 2: –ö—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ Date.now() –≤ –∫—Ä–∏—Ç–∏—á–Ω—ã—Ö –º–µ—Å—Ç–∞—Ö

**–ü—Ä–æ–±–ª–µ–º–∞:** `Date.now()` –≤—ã–∑—ã–≤–∞–µ—Ç—Å—è –º–Ω–æ–≥–æ–∫—Ä–∞—Ç–Ω–æ –≤ –∫—Ä–∏—Ç–∏—á–Ω—ã—Ö –ø—É—Ç—è—Ö.

**–†–µ—à–µ–Ω–∏–µ:** –ö—ç—à–∏—Ä–æ–≤–∞—Ç—å `Date.now()` –Ω–∞ —É—Ä–æ–≤–Ω–µ –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–∞ —Å–ø—Ä–µ–¥–∞.

```typescript
// –í server.ts, –≤ onSpreadUpdate
priceMonitor.onSpreadUpdate = (spreadData) => {
  const now = Date.now(); // –ö—ç—à–∏—Ä—É–µ–º –æ–¥–∏–Ω —Ä–∞–∑
  currentSpread = spreadData;
  
  // –ü–µ—Ä–µ–¥–∞–µ–º now –≤ shouldClosePosition –∏ processSpread
  if (currentPosition && !isClosing) {
    const shouldClose = arbitrageStrategy.shouldClosePosition(spreadData, now);
    // ...
  }
};
```

**–≠–∫–æ–Ω–æ–º–∏—è:** ~0.01-0.05ms –Ω–∞ –∫–∞–∂–¥–æ–º –≤—ã–∑–æ–≤–µ (–Ω–µ–±–æ–ª—å—à–∞—è, –Ω–æ –Ω–∞–∫–∞–ø–ª–∏–≤–∞–µ—Ç—Å—è)

---

### ‚úÖ –í–ê–†–ò–ê–ù–¢ 3: –ö—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤ analyzeExecution

**–ü—Ä–æ–±–ª–µ–º–∞:** `analyzeExecution()` –≤—ã–∑—ã–≤–∞–µ—Ç—Å—è –∫–∞–∂–¥—ã–π —Ä–∞–∑, –¥–∞–∂–µ –µ—Å–ª–∏ —Å—Ç–∞–∫–∞–Ω –Ω–µ –∏–∑–º–µ–Ω–∏–ª—Å—è.

**–†–µ—à–µ–Ω–∏–µ:** –ö—ç—à–∏—Ä–æ–≤–∞—Ç—å —Ä–µ–∑—É–ª—å—Ç–∞—Ç –∞–Ω–∞–ª–∏–∑–∞ —Å—Ç–∞–∫–∞–Ω–∞ –¥–æ —Å–ª–µ–¥—É—é—â–µ–≥–æ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è —Å—Ç–∞–∫–∞–Ω–∞.

```typescript
// –í arbitrage-strategy.ts
private cachedAnalysis: {
  orderbookTimestamp: number;
  side: 'buy' | 'sell';
  volume: number;
  result: OrderbookAnalysis | null;
} | null = null;

// –í processSpread:
const orderbookTimestamp = this.orderbookAnalyzer.getOrderbook()?.timestamp || 0;
if (this.cachedAnalysis && 
    this.cachedAnalysis.orderbookTimestamp === orderbookTimestamp &&
    this.cachedAnalysis.side === orderbookSide &&
    this.cachedAnalysis.volume === this.config.positionSize) {
  orderbookAnalysis = this.cachedAnalysis.result;
} else {
  orderbookAnalysis = this.orderbookAnalyzer.analyzeExecution(...);
  this.cachedAnalysis = {
    orderbookTimestamp,
    side: orderbookSide,
    volume: this.config.positionSize,
    result: orderbookAnalysis
  };
}
```

**–≠–∫–æ–Ω–æ–º–∏—è:** ~0.5-2ms –Ω–∞ –∫–∞–∂–¥–æ–º —Å–∏–≥–Ω–∞–ª–µ (–µ—Å–ª–∏ —Å—Ç–∞–∫–∞–Ω –Ω–µ –∏–∑–º–µ–Ω–∏–ª—Å—è)

---

### ‚úÖ –í–ê–†–ò–ê–ù–¢ 4: –ö—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ –≤—ã—á–∏—Å–ª–µ–Ω–∏–π –≤ shouldClosePosition

**–ü—Ä–æ–±–ª–µ–º–∞:** `mexcSpread` –∏ `mexcSpreadTicks` –≤—ã—á–∏—Å–ª—è—é—Ç—Å—è –ø—Ä–∏ –∫–∞–∂–¥–æ–º –≤—ã–∑–æ–≤–µ.

**–†–µ—à–µ–Ω–∏–µ:** –ö—ç—à–∏—Ä–æ–≤–∞—Ç—å –≤—ã—á–∏—Å–ª–µ–Ω–∏—è –¥–æ —Å–ª–µ–¥—É—é—â–µ–≥–æ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è —Å–ø—Ä–µ–¥–∞.

```typescript
// –í arbitrage-strategy.ts
private cachedCloseCalculations: {
  spreadTimestamp: number;
  mexcSpread: number;
  mexcSpreadTicks: number;
} | null = null;

// –í shouldClosePosition:
const spreadTimestamp = currentSpread.timestamp;
if (!this.cachedCloseCalculations || 
    this.cachedCloseCalculations.spreadTimestamp !== spreadTimestamp) {
  const mexcSpread = mexcAsk - mexcBid;
  const mexcSpreadTicks = mexcSpread / tickSize;
  this.cachedCloseCalculations = {
    spreadTimestamp,
    mexcSpread,
    mexcSpreadTicks
  };
}
const { mexcSpread, mexcSpreadTicks } = this.cachedCloseCalculations;
```

**–≠–∫–æ–Ω–æ–º–∏—è:** ~0.1-0.3ms –Ω–∞ –∫–∞–∂–¥–æ–º –≤—ã–∑–æ–≤–µ shouldClosePosition

---

### ‚úÖ –í–ê–†–ò–ê–ù–¢ 5: –£–º–µ–Ω—å—à–µ–Ω–∏–µ MIN_ORDER_INTERVAL –¥–æ 100-150ms

**–ü—Ä–æ–±–ª–µ–º–∞:** `MIN_ORDER_INTERVAL = 200ms` –º–æ–∂–µ—Ç –±—ã—Ç—å —Å–ª–∏—à–∫–æ–º –∫–æ–Ω—Å–µ—Ä–≤–∞—Ç–∏–≤–Ω—ã–º.

**–†–µ—à–µ–Ω–∏–µ:** –£–º–µ–Ω—å—à–∏—Ç—å –¥–æ 100-150ms (–Ω—É–∂–Ω–æ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å –Ω–∞ rate limiting).

```typescript
const MIN_ORDER_INTERVAL = 100; // –í–º–µ—Å—Ç–æ 200ms
```

**–≠–∫–æ–Ω–æ–º–∏—è:** –î–æ 100ms –Ω–∞ –∫–∞–∂–¥–æ–º –æ—Ç–∫—Ä—ã—Ç–∏–∏/–∑–∞–∫—Ä—ã—Ç–∏–∏ (–µ—Å–ª–∏ –ø—Ä–æ—à–ª–æ <200ms —Å –ø–æ—Å–ª–µ–¥–Ω–µ–≥–æ –æ—Ä–¥–µ—Ä–∞)

**–†–∏—Å–∫:** –ú–æ–∂–µ—Ç –ø—Ä–∏–≤–µ—Å—Ç–∏ –∫ rate limiting, –Ω—É–∂–Ω–æ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å

---

### ‚úÖ –í–ê–†–ò–ê–ù–¢ 6: –ü—Ä–µ–¥–≤–∞—Ä–∏—Ç–µ–ª—å–Ω–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞ —É—Å–ª–æ–≤–∏–π –ø–µ—Ä–µ–¥ analyzeExecution

**–ü—Ä–æ–±–ª–µ–º–∞:** `analyzeExecution()` –≤—ã–∑—ã–≤–∞–µ—Ç—Å—è –¥–∞–∂–µ –µ—Å–ª–∏ —Å–ø—Ä–µ–¥ –Ω–µ–¥–æ—Å—Ç–∞—Ç–æ—á–µ–Ω.

**–†–µ—à–µ–Ω–∏–µ:** –£–∂–µ —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω–æ - –ø—Ä–æ–≤–µ—Ä–∫–∞ `tickDiff < minTickDifference` –∏–¥–µ—Ç –ø–µ—Ä–≤–æ–π.

**–°—Ç–∞—Ç—É—Å:** ‚úÖ –£–∂–µ –æ–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞–Ω–æ

---

### ‚úÖ –í–ê–†–ò–ê–ù–¢ 7: –û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è –≤—ã—á–∏—Å–ª–µ–Ω–∏–π –≤ checkSpread

**–ü—Ä–æ–±–ª–µ–º–∞:** –ú–Ω–æ–≥–æ –º–∞—Ç–µ–º–∞—Ç–∏—á–µ—Å–∫–∏—Ö –æ–ø–µ—Ä–∞—Ü–∏–π –≤ `checkSpread()`.

**–†–µ—à–µ–Ω–∏–µ:** –£–∂–µ –æ–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞–Ω–æ (–∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è —É–º–Ω–æ–∂–µ–Ω–∏–µ –≤–º–µ—Å—Ç–æ –¥–µ–ª–µ–Ω–∏—è).

**–°—Ç–∞—Ç—É—Å:** ‚úÖ –£–∂–µ –æ–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞–Ω–æ

---

### ‚úÖ –í–ê–†–ò–ê–ù–¢ 8: –£–±—Ä–∞—Ç—å –ø—Ä–æ–≤–µ—Ä–∫—É –≤–æ–∑—Ä–∞—Å—Ç–∞ —Å–∏–≥–Ω–∞–ª–∞ –∏–∑ –∫—Ä–∏—Ç–∏—á–Ω–æ–≥–æ –ø—É—Ç–∏

**–ü—Ä–æ–±–ª–µ–º–∞:** –ü—Ä–æ–≤–µ—Ä–∫–∞ `Date.now() - timestamp` –ø—Ä–∏ –∫–∞–∂–¥–æ–º –≤—ã–∑–æ–≤–µ `processSpread()`.

**–†–µ—à–µ–Ω–∏–µ:** –ü—Ä–æ–≤–µ—Ä—è—Ç—å –≤–æ–∑—Ä–∞—Å—Ç —Å–∏–≥–Ω–∞–ª–∞ —Ç–æ–ª—å–∫–æ –µ—Å–ª–∏ –µ—Å—Ç—å –∞–∫—Ç–∏–≤–Ω—ã–π —Å–∏–≥–Ω–∞–ª, –∏ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –∫—ç—à–∏—Ä–æ–≤–∞–Ω–Ω–æ–µ –≤—Ä–µ–º—è.

```typescript
// –í processSpread:
if (this.currentSignal) {
  // –ò—Å–ø–æ–ª—å–∑—É–µ–º –∫—ç—à–∏—Ä–æ–≤–∞–Ω–Ω–æ–µ –≤—Ä–µ–º—è –∏–∑ spreadData.timestamp –≤–º–µ—Å—Ç–æ Date.now()
  const signalAge = spread.timestamp - this.currentSignal.timestamp;
  if (signalAge > 30000) {
    this.currentSignal = null;
  } else {
    return;
  }
}
```

**–≠–∫–æ–Ω–æ–º–∏—è:** ~0.01ms –Ω–∞ –∫–∞–∂–¥–æ–º –≤—ã–∑–æ–≤–µ (–Ω–µ–±–æ–ª—å—à–∞—è)

---

### ‚úÖ –í–ê–†–ò–ê–ù–¢ 9: –û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è –ø—Ä–æ–≤–µ—Ä–∫–∏ "–ø—É—Ç—å –æ—Ç—Ö–æ–¥–∞"

**–ü—Ä–æ–±–ª–µ–º–∞:** –ü—Ä–æ–≤–µ—Ä–∫–∞ "–ø—É—Ç—å –æ—Ç—Ö–æ–¥–∞" —É–∂–µ –æ–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞–Ω–∞, –Ω–æ –º–æ–∂–Ω–æ –µ—â–µ —É–ª—É—á—à–∏—Ç—å.

**–†–µ—à–µ–Ω–∏–µ:** –£–∂–µ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç –ø—Ä—è–º–æ–µ —Å—Ä–∞–≤–Ω–µ–Ω–∏–µ —Ü–µ–Ω –±–µ–∑ –≤—ã—á–∏—Å–ª–µ–Ω–∏—è mid - –æ–ø—Ç–∏–º–∞–ª—å–Ω–æ.

**–°—Ç–∞—Ç—É—Å:** ‚úÖ –£–∂–µ –æ–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞–Ω–æ

---

### ‚úÖ –í–ê–†–ò–ê–ù–¢ 10: –ü–∞—Ä–∞–ª–ª–µ–ª—å–Ω–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞ –ø—Ä–æ–≤–µ—Ä–æ–∫ –≤ shouldClosePosition

**–ü—Ä–æ–±–ª–µ–º–∞:** –ü—Ä–æ–≤–µ—Ä–∫–∏ –≤—ã–ø–æ–ª–Ω—è—é—Ç—Å—è –ø–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω–æ.

**–†–µ—à–µ–Ω–∏–µ:** –ú–æ–∂–Ω–æ –æ–±—ä–µ–¥–∏–Ω–∏—Ç—å –Ω–µ–∫–æ—Ç–æ—Ä—ã–µ –ø—Ä–æ–≤–µ—Ä–∫–∏, –Ω–æ —Ç–µ–∫—É—â–∞—è –ª–æ–≥–∏–∫–∞ —É–∂–µ –æ–ø—Ç–∏–º–∞–ª—å–Ω–∞ (–±—ã—Å—Ç—Ä—ã–µ –ø—Ä–æ–≤–µ—Ä–∫–∏ –∏–¥—É—Ç –ø–µ—Ä–≤—ã–º–∏).

**–°—Ç–∞—Ç—É—Å:** ‚úÖ –£–∂–µ –æ–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞–Ω–æ

---

## –ü–†–ò–û–†–ò–¢–ï–¢–ù–´–ï –û–ü–¢–ò–ú–ò–ó–ê–¶–ò–ò

### üî• –í–´–°–û–ö–ò–ô –ü–†–ò–û–†–ò–¢–ï–¢ (–º–∞–∫—Å–∏–º–∞–ª—å–Ω—ã–π —ç—Ñ—Ñ–µ–∫—Ç):

1. **–í–ê–†–ò–ê–ù–¢ 3: –ö—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ analyzeExecution** 
   - –≠–∫–æ–Ω–æ–º–∏—è: ~0.5-2ms –Ω–∞ –∫–∞–∂–¥–æ–º —Å–∏–≥–Ω–∞–ª–µ
   - –ü—Ä–æ—Å—Ç–æ—Ç–∞ —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏: –°—Ä–µ–¥–Ω—è—è
   - –†–∏—Å–∫: –ù–∏–∑–∫–∏–π

2. **–í–ê–†–ò–ê–ù–¢ 5: –£–º–µ–Ω—å—à–µ–Ω–∏–µ MIN_ORDER_INTERVAL –¥–æ 100-150ms**
   - –≠–∫–æ–Ω–æ–º–∏—è: –î–æ 100ms –Ω–∞ –∫–∞–∂–¥–æ–º –æ—Ç–∫—Ä—ã—Ç–∏–∏/–∑–∞–∫—Ä—ã—Ç–∏–∏
   - –ü—Ä–æ—Å—Ç–æ—Ç–∞ —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏: –û—á–µ–Ω—å –ø—Ä–æ—Å—Ç–∞—è
   - –†–∏—Å–∫: –°—Ä–µ–¥–Ω–∏–π (–Ω—É–∂–Ω–æ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å rate limiting)

3. **–í–ê–†–ò–ê–ù–¢ 4: –ö—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ –≤—ã—á–∏—Å–ª–µ–Ω–∏–π –≤ shouldClosePosition**
   - –≠–∫–æ–Ω–æ–º–∏—è: ~0.1-0.3ms –Ω–∞ –∫–∞–∂–¥–æ–º –≤—ã–∑–æ–≤–µ
   - –ü—Ä–æ—Å—Ç–æ—Ç–∞ —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏: –ü—Ä–æ—Å—Ç–∞—è
   - –†–∏—Å–∫: –ù–∏–∑–∫–∏–π

### ‚ö° –°–†–ï–î–ù–ò–ô –ü–†–ò–û–†–ò–¢–ï–¢ (–Ω–∞–∫–æ–ø–∏—Ç–µ–ª—å–Ω—ã–π —ç—Ñ—Ñ–µ–∫—Ç):

4. **–í–ê–†–ò–ê–ù–¢ 1: –û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è checkSpread() - –ø—Ä–µ–¥–æ—Ç–≤—Ä–∞—Ç–∏—Ç—å –¥–≤–æ–π–Ω–æ–π –≤—ã–∑–æ–≤**
   - –≠–∫–æ–Ω–æ–º–∏—è: ~0.1-0.5ms –Ω–∞ –∫–∞–∂–¥–æ–º –¥–≤–æ–π–Ω–æ–º –≤—ã–∑–æ–≤–µ
   - –ü—Ä–æ—Å—Ç–æ—Ç–∞ —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏: –ü—Ä–æ—Å—Ç–∞—è
   - –†–∏—Å–∫: –ù–∏–∑–∫–∏–π

5. **–í–ê–†–ò–ê–ù–¢ 2: –ö—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ Date.now()**
   - –≠–∫–æ–Ω–æ–º–∏—è: ~0.01-0.05ms –Ω–∞ –∫–∞–∂–¥–æ–º –≤—ã–∑–æ–≤–µ
   - –ü—Ä–æ—Å—Ç–æ—Ç–∞ —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏: –ü—Ä–æ—Å—Ç–∞—è
   - –†–∏—Å–∫: –ù–∏–∑–∫–∏–π

### üìä –ù–ò–ó–ö–ò–ô –ü–†–ò–û–†–ò–¢–ï–¢ (–º–∏–Ω–∏–º–∞–ª—å–Ω—ã–π —ç—Ñ—Ñ–µ–∫—Ç):

6. **–í–ê–†–ò–ê–ù–¢ 8: –£–±—Ä–∞—Ç—å –ø—Ä–æ–≤–µ—Ä–∫—É –≤–æ–∑—Ä–∞—Å—Ç–∞ —Å–∏–≥–Ω–∞–ª–∞ –∏–∑ –∫—Ä–∏—Ç–∏—á–Ω–æ–≥–æ –ø—É—Ç–∏**
   - –≠–∫–æ–Ω–æ–º–∏—è: ~0.01ms
   - –ü—Ä–æ—Å—Ç–æ—Ç–∞ —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏: –ü—Ä–æ—Å—Ç–∞—è
   - –†–∏—Å–∫: –ù–∏–∑–∫–∏–π

---

## –û–ñ–ò–î–ê–ï–ú–´–ô –≠–§–§–ï–ö–¢

### –¢–µ–∫—É—â–∏–µ —Ç–∞–π–º–∏–Ω–≥–∏ (–Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ, –ø–∏–Ω–≥ 10ms):
- –î–µ—Ç–µ–∫—Ç —Å–∏–≥–Ω–∞–ª–∞: <1ms
- –û—Ç–∫—Ä—ã—Ç–∏–µ –ø–æ–∑–∏—Ü–∏–∏ (–ª—É—á—à–∏–π —Å–ª—É—á–∞–π): ~13ms
- –ó–∞–∫—Ä—ã—Ç–∏–µ –ø–æ–∑–∏—Ü–∏–∏ (–ª—É—á—à–∏–π —Å–ª—É—á–∞–π): ~21ms

### –ü–æ—Å–ª–µ –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–π (–Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ, –ø–∏–Ω–≥ 10ms):
- –î–µ—Ç–µ–∫—Ç —Å–∏–≥–Ω–∞–ª–∞: <0.5ms (–∫—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ analyzeExecution)
- –û—Ç–∫—Ä—ã—Ç–∏–µ –ø–æ–∑–∏—Ü–∏–∏ (–ª—É—á—à–∏–π —Å–ª—É—á–∞–π): ~12ms (—É–º–µ–Ω—å—à–µ–Ω–∏–µ MIN_ORDER_INTERVAL)
- –ó–∞–∫—Ä—ã—Ç–∏–µ –ø–æ–∑–∏—Ü–∏–∏ (–ª—É—á—à–∏–π —Å–ª—É—á–∞–π): ~20ms (—É–º–µ–Ω—å—à–µ–Ω–∏–µ MIN_ORDER_INTERVAL + –∫—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ)

**–û–±—â–µ–µ —É–ª—É—á—à–µ–Ω–∏–µ:** ~1-2ms –Ω–∞ –∫–∞–∂–¥–æ–º —Ü–∏–∫–ª–µ (–¥–µ—Ç–µ–∫—Ç ‚Üí –≤—Ö–æ–¥ ‚Üí –≤—ã—Ö–æ–¥)

---

## –†–ï–ö–û–ú–ï–ù–î–ê–¶–ò–ò

1. **–ù–∞—á–∞—Ç—å —Å –í–ê–†–ò–ê–ù–¢–ê 3** (–∫—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ analyzeExecution) - –º–∞–∫—Å–∏–º–∞–ª—å–Ω—ã–π —ç—Ñ—Ñ–µ–∫—Ç –ø—Ä–∏ –Ω–∏–∑–∫–æ–º —Ä–∏—Å–∫–µ
2. **–ó–∞—Ç–µ–º –í–ê–†–ò–ê–ù–¢ 4** (–∫—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ –≤—ã—á–∏—Å–ª–µ–Ω–∏–π –≤ shouldClosePosition) - –ø—Ä–æ—Å—Ç–æ –∏ —ç—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω–æ
3. **–ó–∞—Ç–µ–º –í–ê–†–ò–ê–ù–¢ 5** (—É–º–µ–Ω—å—à–µ–Ω–∏–µ MIN_ORDER_INTERVAL) - –Ω–æ –Ω—É–∂–Ω–æ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å –Ω–∞ rate limiting
4. **–ó–∞—Ç–µ–º –í–ê–†–ò–ê–ù–¢ 1** (–æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è checkSpread) - –ø—Ä–æ—Å—Ç–æ –∏ –±–µ–∑–æ–ø–∞—Å–Ω–æ
5. **–í –ø–æ—Å–ª–µ–¥–Ω—é—é –æ—á–µ—Ä–µ–¥—å –í–ê–†–ò–ê–ù–¢ 2 –∏ 8** - –º–∏–Ω–∏–º–∞–ª—å–Ω—ã–π —ç—Ñ—Ñ–µ–∫—Ç, –Ω–æ –ø—Ä–æ—Å—Ç–æ —Ä–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å

---

## –í–ê–ñ–ù–û

–í—Å–µ –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏ –¥–æ–ª–∂–Ω—ã –±—ã—Ç—å –ø—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω—ã –Ω–∞ —Ä–µ–∞–ª—å–Ω–æ–π —Ç–æ—Ä–≥–æ–≤–ª–µ, –æ—Å–æ–±–µ–Ω–Ω–æ:
- –£–º–µ–Ω—å—à–µ–Ω–∏–µ MIN_ORDER_INTERVAL (–º–æ–∂–µ—Ç –ø—Ä–∏–≤–µ—Å—Ç–∏ –∫ rate limiting)
- –ö—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ analyzeExecution (–Ω—É–∂–Ω–æ —É–±–µ–¥–∏—Ç—å—Å—è, —á—Ç–æ –∫—ç—à –∏–Ω–≤–∞–ª–∏–¥–∏—Ä—É–µ—Ç—Å—è –ø—Ä–∞–≤–∏–ª—å–Ω–æ)




